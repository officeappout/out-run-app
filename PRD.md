
OUT - מסמך אפיון טכני מלא (Master PRD)
🛑 הוראה קריטית ל-Cursor
אל תכתוב שום קוד עדיין!
קרא את המסמך הזה לעומק.
נתח את הקשר בין ה-UI הפשוט לבין הלוגיקה החכמה (Types) שמוגדרת כאן.
הצג לי תוכנית עבודה (Plan Mode) ומבנה תיקיות.
רק אחרי שאאשר לך - תתחיל לבנות.
פרק א': חזון המוצר (The Vision)
המוצר: אפליקציית כושר חכמה ("OUT") שבונה מסלולי אימון בחוץ.
הייחודיות: המשתמש בוחר "כמה זמן יש לי", והאלגוריתם בונה לו מסלול שמשלב הליכה/ריצה (לפי הרמה שלו) עם תחנות כוח בפארקים (לפי הציוד הזמין שם).
הגישה הטכנית: Frontend פשוט ונקי (כמו בתמונות) שמחביא Backend חכם ומורכב (RPG Elements, אלגוריתם התאמה).
גבולות גזרה לגרסה זו (MVP):
❌ בלי Backend אמיתי (שימוש ב-Mock Data חכם).
❌ בלי שעונים חכמים או פיצ'רים חברתיים.
❌ מיקוד ב-Outdoor בלבד (לא בית/משרד).
פרק ב': מוח המערכת (Data Architecture)
עליך להשתמש ב-Types המדויקים שהגדרנו. אל תמציא טיפוסים פשוטים.
1. פרופיל משתמש (src/types/user-profile.ts)
המשתמש הוא לא סתם "שם וגיל", אלא דמות RPG:
Skill Tree: רמות נפרדות (1-22) לכל תחום (Upper Body, Core, Cardio).
XP System: צבירת נקודות ועליית רמות.
Running Profile: כולל אזורי קצב (Pace Zones) ומטרות ריצה.
2. הפארקים והמתקנים (src/features/map/types/map-objects.type.ts)
הפארק הוא ישות חכמה:
MapPark: מכיל דירוג איכות (adminQualityScore), האם מוצל, האם יש ברזייה.
Devices: רשימת מתקנים בפארק. לכל מתקן יש:
difficultyLevel (1-3): האם מתאים למתחילים?
type: הידראולי (קל) / סטטי (קשה).
videoUrl: סרטון הדרכה לביצוע התרגיל.
פרק ג': מסכי האפליקציה (UI & Logic)
שלב 1: Onboarding (הכרת המשתמש)
UI: שאלון פשוט (אקורדיון). גיל, משקל, רמת כושר כללית ("בקושי זז" / "מתאמן קבוע").
לוגיקה: התשובות הפשוטות מתורגמות לפרופיל המורכב:
"בקושי זז" -> מגדיר את כל ה-Skill Tree לרמה 1.
"מתאמן קבוע" -> מגדיר רמה 5.
שלב 2: התאמת אימון (The Setup Screen)
Reference: ראה תמונה 12.02.43.jpg.
UI:
סליידר זמן רציף (15-60 דקות).
בחירת סוג פעילות (הליכה/ריצה).
Toggle קריטי: "שילוב כוח בפארק" (On/Off).
לוגיקה (Smart Match Algorithm):
אם ה-Toggle דלוק: חפש מסלולים שעוברים דרך פארקים שיש בהם devices.length > 0.
סינון נוסף: הצג רק פארקים שרמת המתקנים בהם (difficultyLevel) תואמת לרמת המשתמש.
שלב 3: מפה ובחירת מסלול (Map View)
Reference: ראה תמונה 12.02.54.jpg.
UI:
מפת Mapbox מלאה.
קו מסלול בצבע טורקיז (#00E5FF).
כרטיסי מסלול ("Route Cards") בתחתית המסך (Swiper/Carousel).
נתונים: כל כרטיס מציג: מרחק, זמן, כמות מטבעות (Coins) צפויה, ורמת קושי.
שלב 4: אימון פעיל (Active Workout)
Reference: ראה תמונה 12.02.04.jpg (מסך תרגיל) ו-12.02.21.jpg (מסך מפה).
זרימה:
הליכה: מציג מפה, מרחק וזמן.
הגעה ליעד (Geofence): כשמתקרבים לפארק (מרחק < 30מ'), המסך מתחלף אוטומטית למסך תרגיל.
ביצוע תרגיל: וידאו בחצי העליון, טיימר/חזרות למטה, כפתור "סיימתי".
סיום תרגיל: קבלת XP וחזרה למצב הליכה.
פרק ד': עיצוב וטכנולוגיה (Tech Stack)
טכנולוגיות
Framework: Next.js 14 (App Router).
Language: TypeScript (Strict Mode).
State Management: Zustand (חנויות נפרדות: useUserStore, useMapStore).
Maps: react-map-gl (Mapbox).
עיצוב (Design System)
צבע ראשי: טורקיז #00E5FF (כפתורים ראשיים, מסלול).
צבע רקע: נקי (לבן/אפור בהיר #F3F4F6).
טיפוגרפיה: גופנים עגולים ומודרניים (Heebo או Assistant בעברית).
רכיבים: כרטיסים עם פינות עגולות (rounded-2xl), צלליות עדינות (shadow-sm).
פרק ה': מבנה תיקיות (Project Structure)
עבוד לפי המבנה המודולרי הבא (Feature-Based):
Plaintext

src/
├── app/                  # Next.js Pages
├── features/
│   ├── map/              # לוגיקת המפה
│   │   ├── components/   # MapView, RouteCard
│   │   ├── data/         # mock-locations.ts (הקובץ המפורט שיצרנו)
│   │   ├── types/        # map-objects.type.ts
│   │   └── store/
│   ├── running/          # לוגיקת הריצה
│   │   ├── types/        # running.types.ts
│   │   └── store/
│   ├── user/             # פרופיל משתמש
│   │   ├── types/        # user-profile.ts
│   │   └── store/
│   └── workout/          # ניהול האימון הפעיל (Logic + UI)
├── components/           # רכיבים גנריים (Button, Slider, Toggle)
└── lib/                  # Utilities
שאלות ל-Cursor לפני תחילת עבודה:
האם זיהית את שלושת קבצי ה-Types העיקריים והבנת את הקשר ביניהם?
האם ברור לך איך ה-Toggle במסך "התאמת אימון" משפיע על סינון הנתונים מ-mock-locations?
האם אתה מוכן להציג תוכנית עבודה?